# RStudio

:::::: {tab-set}

::::: {tab-item} Default

:::: {tab-set}

::: {tab-item} 4.3.2

[![](badges/release-4.3.2-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.3.2)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-22.04-lightseagreen.svg)
* **Terminal:** ![](./badges/tmux-3.2a-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.1.16-lightseagreen.svg) ![](./badges/fish-3.3.1-lightseagreen.svg) ![](./badges/zsh-5.8.1-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-6.2-lightseagreen.svg) ![](./badges/vim-8.2-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.4.9-lightseagreen.svg) ![](./badges/dpkg-1.21.1-lightseagreen.svg) ![](./badges/pip-23.3.1-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-11.4.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.20.1-lightseagreen.svg) ![](./badges/Python-3.10.12-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.3.2-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.37.2-lightseagreen.svg)
* **NVIDIA Libraries:** ![](./badges/cuBLAS-11.11.3.6-lightseagreen.svg) ![](./badges/cuDNN-8.9.0.131-lightseagreen.svg) ![](./badges/NCCL-2.15.5-lightseagreen.svg)
* **Extension:** ![](./badges/OpenMPI-4.1.2-lightseagreen.svg)

:::

::: {tab-item} 4.2.3

[![](badges/release-4.2.3-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.2.3)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-22.04-lightseagreen.svg)
* **Terminal:** ![](./badges/tmux-3.2a-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.1.16-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-6.2-lightseagreen.svg) ![](./badges/vim-8.2-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.4.8-lightseagreen.svg) ![](./badges/dpkg-1.21.1-lightseagreen.svg) ![](./badges/pip-23.0.1-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-11.3.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.18-lightseagreen.svg) ![](./badges/Python-3.10.6-lightseagreen.svg) ![](./badges/R-4.2.3-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.37.2-lightseagreen.svg)

:::

::: {tab-item} 4.2.1

[![](badges/release-4.2.1-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.2.1)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-20.04-lightseagreen.svg)
* **Terminal:** ![](./badges/tmux-3.0a-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.17-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-26.3-lightseagreen.svg) ![](./badges/nano-4.8-lightseagreen.svg) ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.0.6-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg) ![](./badges/pip-22.1.2-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-9.4.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.16-lightseagreen.svg) ![](./badges/Python-3.8.10-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.2.1-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.31.1-lightseagreen.svg)

:::

::: {tab-item} 4.1.2

[![](badges/release-4.1.2-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.1.2)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-20.04-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.17-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-26.3-lightseagreen.svg) ![](./badges/nano-4.8-lightseagreen.svg) ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.0.6-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg) ![](./badges/pip-21.3.1-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-9.3.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.13-lightseagreen.svg) ![](./badges/Python-3.8.10-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.1.2-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.31.1-lightseagreen.svg)

:::

::: {tab-item} 4.0.5

[![](badges/release-4.0.5-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.0.5)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-20.04-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.17-lightseagreen.svg)
* **Editor:** ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.0.4-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg) ![](./badges/pip-21.0.1-lightseagreen.svg)
* **Programming Language:** ![](./badges/CUDA-10.1-lightseagreen.svg) ![](./badges/GCC-9.3.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.10-lightseagreen.svg) ![](./badges/Python-3.8.5-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.0.5-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.31.1-lightseagreen.svg)

:::

::: {tab-item} 4.0.3

[![](badges/release-4.0.3-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.0.3)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-20.04-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.16-lightseagreen.svg)
* **Editor:** ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.0.2-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg) ![](./badges/pip-20.0.2-lightseagreen.svg)
* **Programming Language:** ![](./badges/CUDA-11.1-lightseagreen.svg) ![](./badges/GCC-9.3.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.9.1-lightseagreen.svg) ![](./badges/Python-3.8.5-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.0.3-lightseagreen.svg)
* **Database:** ![](./badges/SQLite-3.31.1-lightseagreen.svg)

:::

::: {tab-item} 3.6.3

[![](badges/release-3.6.3-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=3.6.3)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Debian-10-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.3-lightseagreen.svg)
* **Editor:** ![](./badges/nano-3.2-lightseagreen.svg) ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-1.8.2.1-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-8.3.0-lightseagreen.svg) ![](./badges/Python-3.7.3-lightseagreen.svg) ![](./badges/Python-2.7.16-lightseagreen.svg) ![](./badges/R-3.6.3-lightseagreen.svg)

:::

::: {tab-item} 3.6.2

[![](badges/release-3.6.2-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=3.6.2-5)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Debian-10-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.0.3-lightseagreen.svg)
* **Editor:** ![](./badges/nano-3.2-lightseagreen.svg) ![](./badges/vim-8.1-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-1.8.2-lightseagreen.svg) ![](./badges/dpkg-1.19.7-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-8.3.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.6-lightseagreen.svg) ![](./badges/Python-3.7.3-lightseagreen.svg) ![](./badges/Python-2.7.16-lightseagreen.svg) ![](./badges/R-3.6.2-lightseagreen.svg)

:::

::::

:::::

::::: {tab-item} Intel MKL

:::: {tab-set}

::: {tab-item} 4.3.2-mkl

[![](badges/release-4.3.2-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.3.2-mkl)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-22.04-lightseagreen.svg)
* **Terminal:** ![](./badges/tini-0.19.0-lightseagreen.svg) ![](./badges/tmux-3.2a-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.1.16-lightseagreen.svg) ![](./badges/fish-3.3.1-lightseagreen.svg) ![](./badges/zsh-5.8.1-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-6.2-lightseagreen.svg) ![](./badges/vim-8.2-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.4.10-lightseagreen.svg) ![](./badges/dpkg-1.21.1-lightseagreen.svg) ![](./badges/npm-8.5.1-lightseagreen.svg) ![](./badges/pip-22.0.2-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-11.4.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.20.1-lightseagreen.svg) ![](./badges/Python-3.10.12-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.3.2-lightseagreen.svg)
* **Utility:** ![](./badges/EasyBuild-4.8.2-lightseagreen.svg) ![](./badges/Lmod-8.7-lightseagreen.svg)
* **Extension:** ![](./badges/mkl-2023.2.0-lightseagreen.svg) ![](./badges/OpenMPI-4.1.2-lightseagreen.svg)

:::

::: {tab-item} 4.2.3-mkl

[![](badges/release-4.2.3-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.2.3-mkl)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Ubuntu-22.10-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.2.2-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-6.4-lightseagreen.svg) ![](./badges/vim-9.0-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.5.3-lightseagreen.svg) ![](./badges/dpkg-1.21.9-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-12.2.0-lightseagreen.svg) ![](./badges/OpenJDK-11.0.18-lightseagreen.svg) ![](./badges/Python-3.10.7-lightseagreen.svg) ![](./badges/R-4.2.3-lightseagreen.svg)
* **CRAN Packages:** ![](./badges/renv-0.17.2-lightseagreen.svg) ![](./badges/shiny-1.7.4-lightseagreen.svg)
* **Extension:** ![](./badges/mkl-2023.0.0-lightseagreen.svg)

:::

::: {tab-item} 4.2.1-mkl

[![](badges/release-4.2.1-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.2.1-mkl)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Debian-11-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.1.4-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-5.4-lightseagreen.svg) ![](./badges/vim-8.2-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.2.4-lightseagreen.svg) ![](./badges/dpkg-1.20.10-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-10.2.1-lightseagreen.svg) ![](./badges/OpenJDK-11.0.16-lightseagreen.svg) ![](./badges/Python-3.9.2-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.2.1-lightseagreen.svg)
* **CRAN Packages:** ![](./badges/renv-0.15.5-lightseagreen.svg) ![](./badges/shiny-1.7.2-lightseagreen.svg)
* **Extension:** ![](./badges/mkl-2022.1.0-lightseagreen.svg)

:::

::: {tab-item} 4.1.2-mkl

[![](badges/release-4.1.2-blue.svg)](https://cloud.sdu.dk/app/jobs/create?app=rstudio&version=4.1.2-mkl)
![type](badges/type-interactive-yellow.svg)
![access](badges/access-open-green.svg)
* **Operating System:** ![](./badges/Debian-11-lightseagreen.svg)
* **Shell:** ![](./badges/bash-5.1.4-lightseagreen.svg)
* **Editor:** ![](./badges/emacs-27.1-lightseagreen.svg) ![](./badges/nano-5.4-lightseagreen.svg) ![](./badges/vim-8.2-lightseagreen.svg)
* **Package Manager:** ![](./badges/apt-2.2.4-lightseagreen.svg) ![](./badges/dpkg-1.20.10-lightseagreen.svg)
* **Programming Language:** ![](./badges/GCC-10.2.1-lightseagreen.svg) ![](./badges/OpenJDK-11.0.15-lightseagreen.svg) ![](./badges/Python-3.9.2-lightseagreen.svg) ![](./badges/Python-2.7.18-lightseagreen.svg) ![](./badges/R-4.1.2-lightseagreen.svg)
* **Extension:** ![](./badges/mkl-2022.1.0-lightseagreen.svg)

:::

::::

:::::

::::::

[RStudio](https://rstudio.com/products/rstudio/features/) is an integrated development environment for [R](https://www.r-project.org/about.html), a programming language for statistical computing and graphics.

Introductory tutorials can be found [here](https://support.rstudio.com/hc/en-us/sections/200107586-Using-the-RStudio-IDE).

## Initialization

For information on how to use the *Initialization* parameter, please refer to the [Initialization - Bash script](../hands-on/init-sh.md) section of the documentation.

## Configure SSH access

The app provides optional [support for SSH access](general_settings.md#configure-ssh-access) from an external client. An SSH *public key* must be uploaded using the corresponding panel in *Resources* section of the UCloud side menu.

By checking on *Enable SSH server* a random port is opened for connection. The connection command is shown in the job progress view page.


## Batch mode

This option can be used to submit scripts which will be executed after the job starts.
The job will stop after the execution of the program.

Allowed file formats are: Bash script (`*.sh`) and R script (`*.R`).
These are some working examples:


:::: {tab-set}

::: {tab-item} script.sh

```shell
#!/bin/bash
sudo apt-get update
sudo apt-get install -y libssl-dev liblzma-dev libbz2-dev libicu-dev libxml2-dev
sudo apt-get clean

Rscript /work/script.R
```

:::

::: {tab-item} script.R

```R
# Histogram of Random Normal Numbers
install.packages("pacman")

pacman::p_load(ggplot2, tidyr, dplyr, devtools, formatR)

data = data.frame(gender = c("M", "M", "F"),
                  age = c(20, 60, 30),
                  height = c(180, 200, 150))
data

# number of observations
num_obs <- 1000

# reading arguments ('mean' and 'sd')
args <- commandArgs(trailingOnly = TRUE)

if (length(args) == 0) {
        x <- rnorm(num_obs)
} else {
	if (is.missing(args[1])) {
	  mean <- 0
	} else {
	  mean <- as.numeric(args[1])
	}
	if (is.na(args[2])) {
	  sd <- 1
	} else {
	  sd <- as.numeric(args[2])
	}
	  x <- rnorm(num_obs, mean = mean, sd = sd)
}

print('Plotting histogram')

png('normal-histogram.png', pointsize = 18)
hist(x, las = 1, col = '#437899')
dev.off()
```

:::

::::


## R project environment

It is possible to create isolated and portable environments for R projects using the `renv` package, which is integrated with RStudio.

### Create a new project

An existing folder, say `/work/my_project`, can be converted into an R project by running the following commands from the RStudio console:

```R
setwd('/work/my_project')
renv::init()
Sys.setenv(RENV_PATHS_CACHE = '/work/my_project/renv/cache')
```

where the last command sets the `renv` cache directory inside the project root folder for convenience.
After the job is canceled, `my_project`  will be available in the [job output folder](../guide/submitting.md). The latter can moved to a different location and shared with collaborators.

The project can be activated in a new RStudio instance, by mounting its root folder and running the command:

```R
renv::load(project = '/work/my_project')
```

``` {note}
In order to install new packages within an existing R project, it is necessary to set up again the environmental variable ``RENV_PATHS_CACHE``, as shown above.
```

### Autoload an existing project

Activation of an existing R project can be automated via a Bash script, which is submitted using the optional *Dependencies* parameter. For example:

```shell
#!/bin/bash

echo "Sys.setenv(RENV_PATHS_CACHE = '/work/my_project/renv/cache')" > ~/.Rprofile
echo "renv::load(project = '/work/my_project')" >> ~/.Rprofile
```

where `my_project` is R project environment folder.

## Parallel computing in R

Multicore processing and multi-threaded performance are enabled in the app container via the  Basic Linear Algebra Subroutines (BLAS) library or the Intel Math Kernel Library (MKL). By default, an optimum number of threads is chosen by the program, which usually corresponds to the number of cores available in the computing node.
The number of threads can also be controlled by setting the environmental variable  `OMP_NUM_THREADS` for BLAS, or `MKL_NUM_THREADS` in case R was built using the Intel MKL.

Multi-threading is used to optimize basic linear algebra operations, such as dot product, matrix-vector multiplication, and matrix-matrix multiplication. However, it could interfere with some parallel operations, such as parallel `foreach`, `parapply`, `sfClusterApply`, etc. In this case, the user should make R use only one thread (core) for basic linear algebra operation, by setting

```R
Sys.setenv(OMP_NUM_THREADS = 1)
```

or

```R
Sys.setenv(MKL_NUM_THREADS = 1)
```

for R built against Intel MKL. These variables can also be loaded by adding them in the file `/home/ucloud/.Renviron` and restarting the R session.

In addition, it is possible to control the number of threads on BLAS (Aka 'GotoBLAS', 'ACML', and 'MKL') and the number of threads in OpenMP by installing the `RhpcBLASctl` [R package](https://rdrr.io/cran/RhpcBLASctl/man/RhpcBLASctl-package.html).

For example:

```R
install.packages("RhpcBLASctl")
library(RhpcBLASctl)
blas_set_num_threads(number of threads)
```
